console.log("Background service worker loaded - Chrome Comm Extension");chrome.runtime.onInstalled.addListener(e=>{console.log("Extension installed:",e.reason),e.reason==="install"?(console.log("First time installation"),chrome.storage.local.set({isFirstRun:!0,installedAt:Date.now()})):e.reason==="update"&&console.log("Extension updated")});chrome.runtime.onMessage.addListener((e,n,o)=>{switch(console.log("Background received message:",e),e.type){case"PING":console.log("Ping received, sending pong"),o({success:!0,message:"Pong from background!"});break;case"CONTENT_SCRIPT_READY":console.log("Content script ready on:",e.url),o({success:!0,message:"Background acknowledged"});break;case"GET_TAB_INFO":return chrome.tabs.query({active:!0,currentWindow:!0},r=>{r[0]?o({success:!0,tab:{id:r[0].id,url:r[0].url,title:r[0].title}}):o({success:!1,error:"No active tab found"})}),!0;default:console.log("Unknown message type:",e.type),o({success:!1,error:"Unknown message type"})}return!0});chrome.tabs.onUpdated.addListener((e,n,o)=>{n.status==="complete"&&console.log("Tab updated:",o.url)});console.log("Background service worker initialization complete");
